<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <record id="view_picking_form" model="ir.ui.view">
    <field name="name">stock.picking.form</field>
    <field name="model">stock.picking</field>
    <field name="inherit_id" ref="stock.view_picking_form"/>
    <field name="arch" type="xml">
      <field name="state" position="after">
        <field name="parent_state" invisible="1"/>
      </field>
      <xpath expr="//form/sheet/group/group[2]" position='replace'>
        <group>
          <field name="partner_id" string="Account"/>
            <field name="origin" string="Document"/>
            <field name="reference" string="Reference" />
            <field name="carrier_id" string="Carrier" />
            <field name="scheduled_date" string="Date" attrs="{'readonly': ['|', ('id', '=', False), ('state', 'in', ('done', 'cancel'))], 'required': [('id', '!=', False)]}"/>
            <field name='priority1' string='Priority' />
            <field name="team_id"/>
            <field name="assigned"/>
            <field name="date_done" string="Effective Date" attrs="{'invisible': [('state', '!=', 'done')]}"/>
            <field name="owner_id" groups="stock.group_tracking_owner"/>
            <field name="is_copy" invisible="1"/>
            <!-- <div groups="stock.group_tracking_owner" colspan="2" col="2">
                <button name="action_assign_owner" string="Assign Owner" type="object" attrs="{'invisible': ['|',('move_line_exist', '=', False),('state', 'not in', ('draft','assigned','confirmed'))]}"
                    class="oe_link"/>
            </div> -->
        </group>
      </xpath>
      <!-- <xpath expr="//form/sheet/group/group[1]/field[@name='picking_type_id']" position='attributes'>
        <attribute name="string">Transfer Type</attribute>
      </xpath> -->
      <xpath expr="//form/sheet/group/group[1]" position='replace'>
        <group>
            <field name="picking_type_id" string="Transfer Type" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
            <field name="location_id" string="Original Location" groups="stock.group_stock_multi_locations" attrs="{'invisible': [('picking_type_code', '=', 'incoming')]}" domain="['|', ('company_id', '=', company_id), ('company_id', '=', False)]"/>
            <field name="origin_addr" string="Origin Address"/>
            <field name="location_dest_id" string="Destination Location" groups="stock.group_stock_multi_locations" attrs="{'invisible': [('picking_type_code', '=', 'outgoing')]}" domain="['|', ('company_id', '=', company_id), ('company_id', '=', False)]"/>
            <field name="dest_addr" string="Destination Address"/>
            <field name="backorder_id" readonly="1" attrs="{'invisible': [('backorder_id','=',False)]}"/>
        </group>
      </xpath>
      <!-- <xpath expr="//form/sheet/group/group[1]/field[@name='picking_type_id']" position='attributes'>
        <attribute name="string">Transfer Type</attribute>
      </xpath> -->
    </field>
  </record>
  
  <!-- Custom shipping tree view -->
  <record id="delivery_order_tree_view" model="ir.ui.view">
    <field name="name">delivery.order.tree.view</field>
    <field name="model">stock.picking</field>
    <field name="priority">20</field>
    <field name="arch" type="xml">
      <tree decoration-info="state == 'draft'" decoration-muted="state == 'cancel'" string="Shipments List">
        <field name="name" string="Shipment" />
        <field name="partner_id" string="Customer" />
        <field name="team_id" />
        <field name="shipper" string="Assigned" />
        <field name="location_id" string="Location"/>
        <field name="route_id"/>
        <field name="carrier_id" string="Via"/>
        <field name="scheduled_date" string="Due"/>
        <field name="priority1" widget="priority"/>
        <!-- <field name="status" string="State"/> -->
        <field name="picking_status" widget="color" options="{'readonly_mode': 'color'}"/>
        <field name="location_dest_id" groups="stock.group_stock_multi_locations" invisible="1"/>
        <field name="date" invisible="1"/>
        <field name="scheduled_date" invisible="1"/>
        <field name="origin" invisible="1"/>
        <field name="group_id" invisible="1"/>
        <field name="backorder_id" invisible="1"/>
        <field name="state" invisible="1"/>
        <field name="priority" invisible="1"/>
        <field name="picking_type_id" invisible="1"/>
      </tree>
    </field>
  </record>

  <!-- Custom shipping form view -->
  <record id="delivery_order_form_view" model="ir.ui.view">
    <field name="name">delivery.order.form.view</field>
    <field name="model">stock.picking</field>
    <field name="priority">21</field>
    <field name="arch" type="xml">
      <form string="Transfer">
        <!-- <form position="inside">
            <field name="_barcode_scanned" widget="picking_barcode_handler"/>
        </form> -->
        <header>
          <button name="action_assign"  string="Check Availability" type="object" class="oe_highlight" groups="base.group_user"/>
          <field name="status" widget="statusbar" />
          <field name="picking_type_code" invisible="1"/>
          <field name="is_locked" invisible="1"/>
        </header>
        <sheet>
          <h1 class="d-none d-md-block">
            <i class="fa fa-truck"></i>
            <field name="name" invisible="1"/>
            <field name="cart_name" attrs="{'invisible': [('name','=','/')]}" readonly="1" style="margin-left: 1%;"/>
          </h1>
          <group>
            <group>
              <field name="parent_id"/>
              <field name="partner_id" string="Destination" options='{"no_open": True, "no_create": True}' domain="[('type_extend','=','delivery'),('parent_id','!=',False)]" invisible="1"/>
              <field name="company_id" invisible="1" />
              <field name="partner_shipping_id" invisible="1"/>
              <label for="partner_shipping_address" string="Destination"/>
              <div>
                <field name="partner_shipping_address" readonly="1"/>
              </div>
              <field name="team_id"/>
              <field name="shipper" string="Assigned"/>
              <field name="location_id" invisible="1"/>
              <field name="location_dest_id" invisible="1"/>
              <field name="picking_type_id" readonly="1" invisible="1"  />
            </group>
            <group>
              <field name="origin" string="Document Id" placeholder="e.g. PO0032"/>
              <field name="reference"/>
              <field name="route_id"/>
              <field name="carrier_id"/>
              <field name="scheduled_date" string="Due Date"/>
              <field name="priority1" widget="priority"/>
              <field name="is_shipment" invisible="1"/>
              <field name="sale_id" invisible="1"/>
            </group>
          </group>
          <notebook>
            <page string="PRODUCTS">
              <div class="unit_action_button">
                <field name="state" invisible="1"/>
                <field name="show_operations" invisible="1" readonly="1"/>
              </div>
              <field name="move_ids_without_package" attrs="{'readonly': ['|', '&amp;', ('show_operations', '=', True), '|', ('is_locked', '=', True), ('state', '=', 'done'), '&amp;', ('state', '=', 'done'), ('is_locked', '=', True)]}" context="{'picking_type_code': picking_type_code, 'default_picking_id': id,'form_view_ref':'stock.view_move_picking_form', 'address_in_id': partner_id, 'default_picking_type_id': picking_type_id, 'default_location_id': location_id}" widget="one2many_checkbox">
                <tree decoration-danger="state != 'done' and quantity_done > reserved_availability and show_reserved_availability" decoration-muted="scrapped == True or state == 'cancel' or (state == 'done' and is_locked == True)" string="Stock Moves" create="0" delete="0">
                  <field name="state" invisible="1"/>
                  <field name="show_reserved_availability" invisible="1"/>
                  <field name="scrapped" invisible="1"/>
                  <field name="reserved_availability" invisible="1"/>
                  <field name="quantity_done" invisible="1"/>
                  <field name="is_locked" invisible="1"/>
                  <field name="product_id" />
                  <field name="location_id" string="Location"/>
                  <field name="product_uom_qty" string="Required"/>
                  <field name="reserved_qty" string="Reserved"/>
                  <field name="quantity_done" string="Moved"/>
                  <field name="release" string="Released"/>
                  <field name="ship" string="Shipped"/>
                  <field name="invoice" string="Invoiced"/>
                </tree>
              </field>
            </page>
            <page string="CONTAINERS">
              <field name="stock_container_ids" context="{'tree_view_ref':'shipment.view_one2many_container_tree', 'form_view_ref':'shipment.view_one2many_container_form'}"/>
            </page>
            <page string="CONTENTS">
              <field name="stock_content_ids"/>
            </page>
            <page string="DOCUMENTS">
              <field name="stock_documents_ids">
                <tree>
                  <field name="sequence" widget="handle"/>
                  <field name="doc_type"/>
                  <field name="origin" />
                </tree>
              </field>
            </page>
            <page string="Additional Info" name="extra" invisible="1">
              <group>
                <group>
                  <field name="picking_type_code" invisible="1"/>
                  <field name="move_type" attrs="{'invisible': [('picking_type_code', '=', 'incoming')]}"/>
                </group>
                <group>
                  <field name="company_id" groups="base.group_multi_company" options="{'no_create': True}"/>
                  <field name="group_id" groups="base.group_no_one"/>
                  <field name="priority" attrs="{'invisible': [('picking_type_code', '=', 'incoming')]}"/>
                </group>
              </group>
            </page>
          </notebook>
        </sheet>
      </form>
    </field>
  </record>

  <record id="internal_transfer_tree_view" model="ir.ui.view">
    <field name="name">internal.transfer.tree.view</field>
    <field name="model">stock.picking</field>
    <field name="priority">20</field>
    <field name="arch" type="xml">
      <tree decoration-info="state == 'draft'" decoration-muted="state == 'cancel'" string="Shipments List">
        <field name="name" string="Shipment" />
        <field name="partner_id" string="Customer" />
        <field name="team_id" />
        <field name="shipper" string="Assigned" />
        <field name="location_id" string="Location"/>
        <field name="route_id"/>
        <field name="carrier_id" string="Via"/>
        <field name="scheduled_date" string="Due"/>
        <field name="priority1" widget="priority"/>
        <!-- <field name="status" string="State"/> -->
        <field name="picking_status" widget="color" options="{'readonly_mode': 'color'}"/>
        <field name="location_dest_id" groups="stock.group_stock_multi_locations" invisible="1"/>
        <field name="date" invisible="1"/>
        <field name="scheduled_date" invisible="1"/>
        <field name="origin" invisible="1"/>
        <field name="group_id" invisible="1"/>
        <field name="backorder_id" invisible="1"/>
        <field name="state" invisible="1"/>
        <field name="priority" invisible="1"/>
        <field name="picking_type_id" invisible="1"/>
      </tree>
    </field>
  </record>
    <record id="internal_transfer_form_view" model="ir.ui.view">
    <field name="name">internal.transfer.form.view</field>
    <field name="model">stock.picking</field>
    <field name="priority">21</field>
    <field name="arch" type="xml">
      <form string="Transfer">
        <!-- <form position="inside">
            <field name="_barcode_scanned" widget="picking_barcode_handler"/>
        </form> -->
        <header>
          <button name="action_assign"  string="Check Availability" type="object" class="oe_highlight" groups="base.group_user"/>
          <field name="status" widget="statusbar" />
          <field name="picking_type_code" invisible="1"/>
          <field name="is_locked" invisible="1"/>
        </header>
        <sheet>
          <h1 class="d-none d-md-block">
            <i class="fa fa-truck"></i>
            <field name="name" invisible="1"/>
            <field name="cart_name" attrs="{'invisible': [('name','=','/')]}" readonly="1" style="margin-left: 1%;"/>
          </h1>
          <group>
            <group>
            <field name="picking_type_id" string="Transfer Type" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
            <field name="location_id" string="Original Location" groups="stock.group_stock_multi_locations" attrs="{'invisible': [('picking_type_code', '=', 'incoming')]}" domain="['|', ('company_id', '=', company_id), ('company_id', '=', False)]"/>
            <field name="origin_addr" string="Origin Address"/>
            <field name="location_dest_id" string="Destination Location" groups="stock.group_stock_multi_locations" attrs="{'invisible': [('picking_type_code', '=', 'outgoing')]}" domain="['|', ('company_id', '=', company_id), ('company_id', '=', False)]"/>
            <field name="dest_addr" string="Destination Address"/>
            <field name="backorder_id" readonly="1" attrs="{'invisible': [('backorder_id','=',False)]}"/>
        </group>
            <group>
          <field name="partner_id" string="Account"/>
            <field name="origin" string="Document"/>
            <field name="reference" string="Reference" />
            <field name="carrier_id" string="Carrier" />
            <field name="scheduled_date" string="Date" attrs="{'readonly': ['|', ('id', '=', False), ('state', 'in', ('done', 'cancel'))], 'required': [('id', '!=', False)]}"/>
            <field name='priority1' string='Priority' widget="priority"/>
            <field name="team_id"/>
            <field name="assigned"/>
            <field name="date_done" string="Effective Date" attrs="{'invisible': [('state', '!=', 'done')]}"/>
            <field name="owner_id" groups="stock.group_tracking_owner"/>
            
        </group>
          </group>
          <notebook>
            <page string="PRODUCTS">
              <div class="unit_action_button">
                <field name="state" invisible="1"/>
                <field name="show_operations" invisible="1" readonly="1"/>
              </div>
              <field name="move_ids_without_package" attrs="{'readonly': ['|', '&amp;', ('show_operations', '=', True), '|', ('is_locked', '=', True), ('state', '=', 'done'), '&amp;', ('state', '=', 'done'), ('is_locked', '=', True)]}" context="{'picking_type_code': picking_type_code, 'default_picking_id': id, 'form_view_ref':'stock.view_move_picking_form', 'address_in_id': partner_id, 'default_picking_type_id': picking_type_id, 'default_location_id': location_id}">
                <tree decoration-danger="state != 'done' and quantity_done > reserved_availability and show_reserved_availability" decoration-muted="scrapped == True or state == 'cancel' or (state == 'done' and is_locked == True)" string="Stock Moves" create="0" delete="0">
                  <field name="state" invisible="1"/>
                  <field name="show_reserved_availability" invisible="1"/>
                  <field name="scrapped" invisible="1"/>
                  <field name="reserved_availability" invisible="1"/>
                  <field name="quantity_done" invisible="1"/>
                  <field name="is_locked" invisible="1"/>
                  <field name="product_id" />
                  <field name="location_id" string="Location"/>
                  <field name="container_type" string="Container"/>
                  <field name="reference" string="Reference"/>
                </tree>
              </field>
            </page>
            <page string="CONTAINERS">
              <field name="stock_container_ids" context="{'tree_view_ref':'shipment.view_one2many_container_tree', 'form_view_ref':'shipment.view_one2many_container_form'}"/>
            </page>
            <page string="CONTENTS">
              <field name="stock_content_ids"/>
            </page>
            <page string="DOCUMENTS">
              <field name="stock_documents_ids">
                <tree>
                  <field name="sequence" widget="handle"/>
                  <field name="doc_type"/>
                  <field name="origin" />
                </tree>
              </field>
            </page>
            <page string="Additional Info" name="extra" invisible="1">
              <group>
                <group>
                  <field name="picking_type_code" invisible="1"/>
                  <field name="move_type" attrs="{'invisible': [('picking_type_code', '=', 'incoming')]}"/>
                </group>
                <group>
                  <field name="company_id" groups="base.group_multi_company" options="{'no_create': True}"/>
                  <field name="group_id" groups="base.group_no_one"/>
                  <field name="priority" attrs="{'invisible': [('picking_type_code', '=', 'incoming')]}"/>
                </group>
              </group>
            </page>
          </notebook>
        </sheet>
      </form>
    </field>
  </record>

  <record id="stock_picking_kanban_custom" model="ir.ui.view">
    <field name="name">stock.picking.kanban</field>
    <field name="model">stock.picking</field>
    <field name="inherit_id" ref="stock.stock_picking_kanban"/>
    <field name="arch" type="xml">
      <xpath expr="//kanban" position="replace">
        <kanban class="o_kanban_small_column o_kanban_mobile" default_group_by="shipper" archivable="false">
          <field name="shipper"/>
          <field name="name"/>
          <field name="partner_id"/>
          <field name="location_dest_id"/>
          <field name="date"/>
          <field name="scheduled_date"/>
          <field name="team_id"/>
          <field name="carrier_id"/>
          <field name="priority1" />
          <field name="present"/>
          <templates>
            <t t-name="kanban-box">
              <div t-attf-class="oe_kanban_card oe_kanban_global_click">
                <div class="o_kanban_record_top mb8">
                  <div class="o_kanban_record_headings">
                    <strong class="o_kanban_record_title"><span><t t-esc="record.partner_id.value"/></span></strong>
                  </div>
                  <t t-if="record.status.name == 'ASSIGN'">
                    <strong style="background-color:#2dd32d; font-size: medium;">
                      <field name="status" widget="label_selection" options="{'classes': {'assign': 'ASSIGN', 'wait': 'WAIT', 'prepare': 'PREPARE', 'release': 'RELEASE', 'ship': 'SHIP','done':'DONE'}}" />
                    </strong>
                  </t>
                  <t t-elif="record.status.name == 'WAIT'">
                    <strong style="background-color:#38d5d5;">
                      <field name="status" widget="label_selection" options="{'classes': {'assign': 'ASSIGN', 'wait': 'WAIT', 'prepare': 'PREPARE', 'release': 'RELEASE', 'ship': 'SHIP','done':'DONE'}}"/>
                    </strong>
                  </t>
                  <t t-elif="record.status.name == 'PREPARE'">
                    <strong style="background-color:orange;">
                      <field name="status" widget="label_selection" options="{'classes': {'assign': 'ASSIGN', 'wait': 'WAIT', 'prepare': 'PREPARE', 'release': 'RELEASE', 'ship': 'SHIP','done':'DONE'}}"/>
                    </strong>
                  </t>
                  <t t-elif="record.status.name == 'RELEASE'">
                    <strong style="background-color:indigo;">
                      <field name="status" widget="label_selection" options="{'classes': {'assign': 'ASSIGN', 'wait': 'WAIT', 'prepare': 'PREPARE', 'release': 'RELEASE', 'ship': 'SHIP','done':'DONE'}}"/>
                    </strong>
                  </t>
                  <t t-elif="record.status.name == 'SHIP'">
                    <strong style="background-color:#ff6c4a;">
                      <field name="status" widget="label_selection" options="{'classes': {'assign': 'ASSIGN', 'wait': 'WAIT', 'prepare': 'PREPARE', 'pack': 'PACK', 'unitize': 'UNITIZE', 'release': 'RELEASE', 'ship': 'SHIP','done':'DONE'}}"/>
                    </strong>
                  </t>
                  <t t-elif="record.status.name == 'DONE'">
                    <strong style="background-color:violet;">
                      <field name="status" widget="label_selection" options="{'classes': {'assign': 'ASSIGN', 'wait': 'WAIT', 'prepare': 'PREPARE', 'release': 'RELEASE', 'ship': 'SHIP','done':'DONE'}}"/>
                    </strong>
                  </t>
                  <t t-else="">
                    <strong>
                      <field name="status" widget="label_selection" options="{'classes': {'assign': 'ASSIGN', 'wait': 'WAIT', 'prepare': 'PREPARE', 'release': 'RELEASE', 'ship': 'SHIP','done':'DONE'}}"/>
                    </strong>
                  </t>
                </div>
                <div class="o_kanban_record_bottom">
                  <div class="oe_kanban_bottom_left">
                    <t t-esc="record.present.value"/><br/>
                    <t t-esc="record.team_id.value"/><br/>
                    <t t-esc="record.carrier_id.value"/>
                  </div>
                  <div class="oe_kanban_bottom_right" style="text-align:center;">
                    <span><field name="priority1"/>
                    <span><br/><t t-esc="record.date.value and record.date.value.split(' ')[0] or False"/></span></span>
                  </div>
                </div>
              </div>
            </t>
          </templates>
        </kanban>
      </xpath>
    </field>
  </record>

  <record id="stock_picking_type_kanban_inherit" model="ir.ui.view">
    <field name="name">stock.picking.type.kanban.inherit</field>
    <field name="model">stock.picking.type</field>
    <field name="inherit_id" ref="stock.stock_picking_type_kanban" />
    <field name="arch" type="xml">
      <xpath expr="//div[@class='col-6 o_kanban_card_manage_section o_kanban_manage_view']/div[3]" position="replace">
        <div role="menuitem">
          <a name="get_only_action_picking_tree_ready" type="object">Ready</a>
        </div>
      </xpath>
      <xpath expr="//div[@class='col-6 o_kanban_card_manage_section o_kanban_manage_new']/div[2]" position="replace">
        <div role="menuitem">
          <a name="get_action_picking_form" type="object" context="{'default_immediate_transfer': True}">Immediate Transfer</a>
        </div>
      </xpath>
      <xpath expr="//div[@class='col-6 o_kanban_card_manage_section o_kanban_manage_new']/div[3]" position="replace">
        <div role="menuitem">
          <a name="get_action_picking_form" type="object">Planned Transfer</a>
        </div>
      </xpath>
    </field>
  </record>
  
  <record id="custom_picking_view" model="ir.actions.act_window">
    <field name="name">Shipments</field>
    <field name="res_model">stock.picking</field>
    <field name="type">ir.actions.act_window</field>
    <field name="view_type">form</field>
    <field name="view_mode">tree,kanban,form,calendar</field>
    <field name="domain">[('picking_type_id.name','=','Delivery Orders')]</field>
    <field name="context">{'default_is_shipment':True, 'create': False}</field>
    <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('shipment.delivery_order_tree_view')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('shipment.delivery_order_form_view')})]"/>
  </record>

  <record id="custom_action_picking_form" model="ir.actions.act_window">
    <field name="name">New Transfer</field>
    <field name="res_model">stock.picking</field>
    <field name="type">ir.actions.act_window</field>
    <field name="view_type">form</field>
    <field name="view_mode">form</field>
    <field name="domain"></field>
    <field name="context">{
            'search_default_picking_type_id': [active_id],
            'default_picking_type_id': active_id,
            'contact_display': 'partner_address',
    }
    </field>
    <field name="search_view_id" ref="stock.view_picking_internal_search"/>
    <field name="view_id" ref='shipment.delivery_order_form_view'/>
    <field name="help" type="html">
      <p class="o_view_nocontent_smiling_face">
        Define a new transfer
      </p>
    </field>
  </record>
  
  <record id="delivery_order_action" model="ir.actions.act_window">
    <field name="name">Delivery Orders</field>
    <field name="res_model">stock.picking</field>
    <field name="type">ir.actions.act_window</field>
    <field name="view_type">form</field>
    <field name="view_mode">tree,kanban,form,calendar</field>
    <field name="domain"></field>
    <field name="context">{
            'search_default_picking_type_id': [active_id],
            'default_picking_type_id': active_id,
            'contact_display': 'partner_address',
    }
    </field>
    <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('shipment.delivery_order_tree_view')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('shipment.delivery_order_form_view')})]"/>
    <field name="search_view_id" ref="stock.view_picking_internal_search"/>
    <field name="help" type="html">
      <p class="o_view_nocontent_smiling_face">
        Define a new transfer
      </p>
    </field>
  </record>


  <record id="custom_picking_tree_ready" model="ir.actions.act_window">
    <field name="name">To Do</field>
    <field name="res_model">stock.picking</field>
    <field name="type">ir.actions.act_window</field>
    <field name="view_type">form</field>
    <field name="view_mode">tree,kanban,form,calendar</field>
    <field name="domain"></field>
    <field name="context">{
            'search_default_picking_type_id': [active_id],
            'default_picking_type_id': active_id,
            'contact_display': 'partner_address',
            'search_default_available': 1,}
    </field>
    <field name="search_view_id" ref="stock.view_picking_internal_search"/>
    <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('shipment.delivery_order_tree_view')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('shipment.delivery_order_form_view')})]"/>
    <field name="help" type="html">
      <p class="o_view_nocontent_smiling_face">
        Define a new transfer
      </p>
    </field>
  </record>

  <record id="custom_picking_tree_waiting" model="ir.actions.act_window">
    <field name="name">Waiting Transfers</field>
    <field name="res_model">stock.picking</field>
    <field name="type">ir.actions.act_window</field>
    <field name="view_type">form</field>
    <field name="view_mode">tree,kanban,form,calendar</field>
    <field name="domain"></field>
    <field name="context">{
            'search_default_picking_type_id': [active_id],
            'default_picking_type_id': active_id,
            'contact_display': 'partner_address',
            'search_default_waiting': 1,}
    </field>
    <field name="search_view_id" ref="stock.view_picking_internal_search"/>
    <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('shipment.delivery_order_tree_view')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('shipment.delivery_order_form_view')})]"/>
    <field name="help" type="html">
      <p class="o_view_nocontent_smiling_face">
        Define a new transfer
      </p>
    </field>
  </record>

  <record id="custom_picking_tree_late" model="ir.actions.act_window">
    <field name="name">Late Transfers</field>
    <field name="res_model">stock.picking</field>
    <field name="type">ir.actions.act_window</field>
    <field name="view_type">form</field>
    <field name="view_mode">tree,kanban,form,calendar</field>
    <field name="domain"></field>
    <field name="context">{
            'search_default_picking_type_id': [active_id],
            'default_picking_type_id': active_id,
            'contact_display': 'partner_address',
            'search_default_late': 1,
    }
    </field>
    <field name="search_view_id" ref="stock.view_picking_internal_search"/>
    <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('shipment.delivery_order_tree_view')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('shipment.delivery_order_form_view')})]"/>
    <field name="help" type="html">
      <p class="o_view_nocontent_smiling_face">
        Define a new transfer
      </p>
    </field>
  </record>

  <record id="custom_picking_tree_backorder" model="ir.actions.act_window">
    <field name="name">Backorders</field>
    <field name="res_model">stock.picking</field>
    <field name="type">ir.actions.act_window</field>
    <field name="view_type">form</field>
    <field name="view_mode">tree,kanban,form,calendar</field>
    <field name="domain"></field>
    <field name="context">{
            'search_default_picking_type_id': [active_id],
            'default_picking_type_id': active_id,
            'contact_display': 'partner_address',
            'search_default_backorder': 1,
    }
    </field>
    <field name="search_view_id" ref="stock.view_picking_internal_search"/>
    <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('shipment.delivery_order_tree_view')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('shipment.delivery_order_form_view')})]"/>
    <field name="help" type="html">
      <p class="o_view_nocontent_smiling_face">
        Define a new transfer
      </p>
    </field>
  </record>
  
  <record id="stock_picking_state_action" model="ir.actions.act_window">
    <field name="name">Stock picking state</field>
    <field name="res_model">stock.picking.states</field>
    <field name="view_type">form</field>
    <field name="view_mode">tree,form</field>
    <field name="context">{'create': False}</field>
  </record>

  <menuitem id="picking_states" parent="stock.menu_warehouse_config" name="States"
            action="stock_picking_state_action" active="0"/>

  <record id="picking_tree_view" model="ir.ui.view">
    <field name="name">picking.tree.view</field>
    <field name="model">stock.picking</field>
    <field name="priority">20</field>
    <field name="arch" type="xml">
      <tree decoration-info="state == 'draft'" decoration-muted="state == 'cancel'" string="Shipments List">
        <field name="name" string="Shipment" />
        <field name="partner_id" string="Customer" />
        <field name="team_id" />
        <field name="shipper" string="Assigned" />
        <field name="location_id" string="Location"/>
        <field name="route_id"/>
        <field name="carrier_id" string="Via"/>
        <field name="scheduled_date" string="Due"/>
        <field name="priority1" widget="priority"/>
        <!-- <field name="status" string="State"/> -->
        <field name="picking_status" widget="color" options="{'readonly_mode': 'color'}"/>
        <field name="location_dest_id" groups="stock.group_stock_multi_locations" invisible="1"/>
        <field name="date" invisible="1"/>
        <field name="scheduled_date" invisible="1"/>
        <field name="origin" invisible="1"/>
        <field name="group_id" invisible="1"/>
        <field name="backorder_id" invisible="1"/>
        <field name="state" invisible="1"/>
        <field name="priority" invisible="1"/>
        <field name="picking_type_id" invisible="1"/>
      </tree>
    </field>
  </record>
    <record id="picking_form_view" model="ir.ui.view">
    <field name="name">picking.form.view</field>
    <field name="model">stock.picking</field>
    <field name="priority">21</field>
    <field name="arch" type="xml">
      <form string="Transfer">
        <!-- <form position="inside">
            <field name="_barcode_scanned" widget="picking_barcode_handler"/>
        </form> -->
        <header>
          <button name="action_assign"  string="Check Availability" type="object" class="oe_highlight" groups="base.group_user"/>
          <field name="status" widget="statusbar" />
          <field name="picking_type_code" invisible="1"/>
          <field name="is_locked" invisible="1"/>
        </header>
        <sheet>
          <h1 class="d-none d-md-block">
            <i class="fa fa-truck"></i>
            <field name="name" invisible="1"/>
            <field name="cart_name" attrs="{'invisible': [('name','=','/')]}" readonly="1" style="margin-left: 1%;"/>
          </h1>
          <group>
            <group>
            <field name="picking_type_id" string="Transfer Type" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
            <field name="location_id" string="Original Location" groups="stock.group_stock_multi_locations" attrs="{'invisible': [('picking_type_code', '=', 'incoming')]}" domain="['|', ('company_id', '=', company_id), ('company_id', '=', False)]"/>
            <field name="origin_addr" string="Origin Address"/>
            <field name="location_dest_id" string="Destination Location" groups="stock.group_stock_multi_locations" attrs="{'invisible': [('picking_type_code', '=', 'outgoing')]}" domain="['|', ('company_id', '=', company_id), ('company_id', '=', False)]"/>
            <field name="dest_addr" string="Destination Address"/>
            <field name="backorder_id" readonly="1" attrs="{'invisible': [('backorder_id','=',False)]}"/>
        </group>
            <group>
          <field name="partner_id" string="Account"/>
            <field name="origin" string="Document"/>
            <field name="reference" string="Reference" />
            <field name="carrier_id" string="Carrier" />
            <field name="scheduled_date" string="Date" attrs="{'readonly': ['|', ('id', '=', False), ('state', 'in', ('done', 'cancel'))], 'required': [('id', '!=', False)]}"/>
            <field name='priority1' string='Priority' widget="priority"/>
            <field name="team_id"/>
            <field name="assigned"/>
            <field name="date_done" string="Effective Date" attrs="{'invisible': [('state', '!=', 'done')]}"/>
            <field name="owner_id" groups="stock.group_tracking_owner"/>
            
        </group>
          </group>
          <notebook>
            <page string="PRODUCTS">
              <div class="unit_action_button">
                <field name="state" invisible="1"/>
                <field name="show_operations" invisible="1" readonly="1"/>
              </div>
              <field name="move_ids_without_package" attrs="{'readonly': ['|', '&amp;', ('show_operations', '=', True), '|', ('is_locked', '=', True), ('state', '=', 'done'), '&amp;', ('state', '=', 'done'), ('is_locked', '=', True)]}" context="{'picking_type_code': picking_type_code, 'default_picking_id': id,'form_view_ref':'stock.view_move_picking_form', 'address_in_id': partner_id, 'default_picking_type_id': picking_type_id, 'default_location_id': location_id}">
                <tree decoration-danger="state != 'done' and quantity_done > reserved_availability and show_reserved_availability" decoration-muted="scrapped == True or state == 'cancel' or (state == 'done' and is_locked == True)" string="Stock Moves" create="0" delete="0">
                  <field name="state" invisible="1"/>
                  <field name="show_reserved_availability" invisible="1"/>
                  <field name="scrapped" invisible="1"/>
                  <field name="reserved_availability" invisible="1"/>
                  <field name="quantity_done" invisible="1"/>
                  <field name="is_locked" invisible="1"/>
                  <field name="product_id" />
                  <field name="location_id" string="Location"/>
                  <field name="container_type" string="Container"/>
                  <field name="reference" string="Reference"/>
                </tree>
              </field>
            </page>
            <page string="CONTAINERS">
              <field name="stock_container_ids" context="{'tree_view_ref':'shipment.view_one2many_container_tree', 'form_view_ref':'shipment.view_one2many_container_form'}"/>
            </page>
            <page string="CONTENTS">
              <field name="stock_content_ids"/>
            </page>
            <page string="DOCUMENTS">
              <field name="stock_documents_ids">
                <tree>
                  <field name="sequence" widget="handle"/>
                  <field name="doc_type"/>
                  <field name="origin" />
                </tree>
              </field>
            </page>
            <page string="Additional Info" name="extra" invisible="1">
              <group>
                <group>
                  <field name="picking_type_code" invisible="1"/>
                  <field name="move_type" attrs="{'invisible': [('picking_type_code', '=', 'incoming')]}"/>
                </group>
                <group>
                  <field name="company_id" groups="base.group_multi_company" options="{'no_create': True}"/>
                  <field name="group_id" groups="base.group_no_one"/>
                  <field name="priority" attrs="{'invisible': [('picking_type_code', '=', 'incoming')]}"/>
                </group>
              </group>
            </page>
          </notebook>
        </sheet>
      </form>
    </field>
  </record>
  <record id="packing_tree_view" model="ir.ui.view">
    <field name="name">packing.tree.view</field>
    <field name="model">stock.picking</field>
    <field name="priority">20</field>
    <field name="arch" type="xml">
      <tree decoration-info="state == 'draft'" decoration-muted="state == 'cancel'" string="Shipments List">
        <field name="name" string="Shipment" />
        <field name="partner_id" string="Customer" />
        <field name="team_id" />
        <field name="shipper" string="Assigned" />
        <field name="location_id" string="Location"/>
        <field name="route_id"/>
        <field name="carrier_id" string="Via"/>
        <field name="scheduled_date" string="Due"/>
        <field name="priority1" widget="priority"/>
        <!-- <field name="status" string="State"/> -->
        <field name="picking_status" widget="color" options="{'readonly_mode': 'color'}"/>
        <field name="location_dest_id" groups="stock.group_stock_multi_locations" invisible="1"/>
        <field name="date" invisible="1"/>
        <field name="scheduled_date" invisible="1"/>
        <field name="origin" invisible="1"/>
        <field name="group_id" invisible="1"/>
        <field name="backorder_id" invisible="1"/>
        <field name="state" invisible="1"/>
        <field name="priority" invisible="1"/>
        <field name="picking_type_id" invisible="1"/>
      </tree>
    </field>
  </record>
    <record id="packing_form_view" model="ir.ui.view">
    <field name="name">packing.form.view</field>
    <field name="model">stock.picking</field>
    <field name="priority">21</field>
    <field name="arch" type="xml">
      <form string="Transfer">
        <!-- <form position="inside">
            <field name="_barcode_scanned" widget="picking_barcode_handler"/>
        </form> -->
        <header>
          <button name="action_assign"  string="Check Availability" type="object" class="oe_highlight" groups="base.group_user"/>
          <field name="status" widget="statusbar" />
          <field name="picking_type_code" invisible="1"/>
          <field name="is_locked" invisible="1"/>
        </header>
        <sheet>
          <h1 class="d-none d-md-block">
            <i class="fa fa-truck"></i>
            <field name="name" invisible="1"/>
            <field name="cart_name" attrs="{'invisible': [('name','=','/')]}" readonly="1" style="margin-left: 1%;"/>
          </h1>
          <group>
            <group>
            <field name="picking_type_id" string="Transfer Type" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
            <field name="location_id" string="Original Location" groups="stock.group_stock_multi_locations" attrs="{'invisible': [('picking_type_code', '=', 'incoming')]}" domain="['|', ('company_id', '=', company_id), ('company_id', '=', False)]"/>
            <field name="origin_addr" string="Origin Address"/>
            <field name="location_dest_id" string="Destination Location" groups="stock.group_stock_multi_locations" attrs="{'invisible': [('picking_type_code', '=', 'outgoing')]}" domain="['|', ('company_id', '=', company_id), ('company_id', '=', False)]"/>
            <field name="dest_addr" string="Destination Address"/>
            <field name="backorder_id" readonly="1" attrs="{'invisible': [('backorder_id','=',False)]}"/>
        </group>
            <group>
          <field name="partner_id" string="Account"/>
            <field name="origin" string="Document"/>
            <field name="reference" string="Reference" />
            <field name="carrier_id" string="Carrier" />
            <field name="scheduled_date" string="Date" attrs="{'readonly': ['|', ('id', '=', False), ('state', 'in', ('done', 'cancel'))], 'required': [('id', '!=', False)]}"/>
            <field name='priority1' string='Priority' widget="priority"/>
            <field name="team_id"/>
            <field name="assigned"/>
            <field name="date_done" string="Effective Date" attrs="{'invisible': [('state', '!=', 'done')]}"/>
            <field name="owner_id" groups="stock.group_tracking_owner"/>
            
        </group>
          </group>
          <notebook>
            <page string="PRODUCTS">
              <div class="unit_action_button">
                <field name="state" invisible="1"/>
                <field name="show_operations" invisible="1" readonly="1"/>
              </div>
              <field name="move_ids_without_package" attrs="{'readonly': ['|', '&amp;', ('show_operations', '=', True), '|', ('is_locked', '=', True), ('state', '=', 'done'), '&amp;', ('state', '=', 'done'), ('is_locked', '=', True)]}" context="{'picking_type_code': picking_type_code, 'default_picking_id': id, 'form_view_ref':'stock.view_move_picking_form', 'address_in_id': partner_id, 'default_picking_type_id': picking_type_id, 'default_location_id': location_id}">
                <tree decoration-danger="state != 'done' and quantity_done > reserved_availability and show_reserved_availability" decoration-muted="scrapped == True or state == 'cancel' or (state == 'done' and is_locked == True)" string="Stock Moves" create="0" delete="0">
                  <field name="state" invisible="1"/>
                  <field name="show_reserved_availability" invisible="1"/>
                  <field name="scrapped" invisible="1"/>
                  <field name="reserved_availability" invisible="1"/>
                  <field name="quantity_done" invisible="1"/>
                  <field name="is_locked" invisible="1"/>
                  <field name="product_id" />
                  <field name="location_id" string="Location"/>
                  <field name="container_type" string="Container"/>
                  <field name="reference" string="Reference"/>
                </tree>
              </field>
            </page>
            <page string="CONTAINERS">
              <field name="stock_container_ids" context="{'tree_view_ref':'shipment.view_one2many_container_tree', 'form_view_ref':'shipment.view_one2many_container_form'}"/>
            </page>
            <page string="CONTENTS">
              <field name="stock_content_ids"/>
            </page>
            <page string="DOCUMENTS">
              <field name="stock_documents_ids">
                <tree>
                  <field name="sequence" widget="handle"/>
                  <field name="doc_type"/>
                  <field name="origin" />
                </tree>
              </field>
            </page>
            <page string="Additional Info" name="extra" invisible="1">
              <group>
                <group>
                  <field name="picking_type_code" invisible="1"/>
                  <field name="move_type" attrs="{'invisible': [('picking_type_code', '=', 'incoming')]}"/>
                </group>
                <group>
                  <field name="company_id" groups="base.group_multi_company" options="{'no_create': True}"/>
                  <field name="group_id" groups="base.group_no_one"/>
                  <field name="priority" attrs="{'invisible': [('picking_type_code', '=', 'incoming')]}"/>
                </group>
              </group>
            </page>
          </notebook>
        </sheet>
      </form>
    </field>
  </record>
</odoo>
